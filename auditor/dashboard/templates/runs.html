<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UatuAudit - Dashboard</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Uatu Brand Colors */
            --ink-900: #0B1B2B;
            --slate-800: #102132;
            --slate-700: #1a2b3e;
            --grid-line: rgba(84, 130, 158, .4);
            --halo-gold: #F7D046;
            --mint-400: #4CE3B8;
            --ice-100: #F2F7FB;
            --ice-200: #D5E4F0;
            --ice-300: #9CB4C6;
            
            /* Typography */
            --font-display: 'Inter', system-ui, sans-serif;
            --font-body: 'Inter', system-ui, sans-serif;
            --font-mono: 'IBM Plex Mono', monospace;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html, body {
            height: 100%;
            overflow: hidden;
        }
        
        body {
            font-family: var(--font-body);
            color: var(--ice-200);
            background: var(--ink-900);
            -webkit-font-smoothing: antialiased;
        }
        
        /* Main grid container - full viewport */
        .main-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            grid-template-rows: repeat(12, 1fr);
            gap: 2px;
        }
        
        /* Base grid cell */
        .grid-cell {
            background: rgba(16, 33, 50, 0.2);
            border: 1px solid var(--grid-line);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            transition: all 0.2s ease;
            position: relative;
        }
        
        /* Empty background cells */
        .bg-cell {
            background: rgba(16, 33, 50, 0.15);
            border: 1px solid var(--grid-line);
        }
        
        /* Logo cell */
        .logo-cell {
            grid-column: 1/3;
            grid-row: 1/2;
            background: transparent;
            border: 2px solid var(--grid-line);
            padding: 12px;
        }
        
        .logo-img {
            height: 36px;
            width: auto;
        }
        
        /* Navigation cells - centered */
        .nav-cell {
            background: transparent;
            border: 2px solid var(--grid-line);
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: var(--ice-300);
            font-size: 14px;
            font-weight: 500;
        }
        
        .nav-cell:hover {
            background: rgba(247, 208, 70, 0.1);
            border-color: var(--halo-gold);
            color: var(--halo-gold);
            transform: scale(1.02);
        }
        
        .nav-cell.active {
            background: rgba(76, 227, 184, 0.1);
            border-color: var(--mint-400);
            color: var(--mint-400);
        }
        
        /* Wallet cell */
        .wallet-cell {
            grid-column: 10/13;
            grid-row: 1/2;
            background: transparent;
            border: 2px solid var(--grid-line);
            padding: 12px 16px;
            gap: 12px;
        }
        
        .wallet-info-group {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 4px;
        }
        
        .wallet-address-row {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .wallet-icon {
            width: 8px;
            height: 8px;
            background: var(--mint-400);
            border-radius: 50%;
        }
        
        .wallet-address {
            font-family: var(--font-mono);
            font-size: 14px;
            color: var(--mint-400);
            letter-spacing: 0.5px;
        }
        
        .user-name {
            font-size: 12px;
            color: var(--ice-300);
            opacity: 0.8;
        }
        
        .network-badge {
            font-size: 10px;
            color: var(--ice-300);
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.8;
        }
        
        .disconnect-btn {
            background: transparent;
            border: 1px solid #EF4444;
            color: #EF4444;
            padding: 6px 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            text-decoration: none;
        }
        
        .disconnect-btn:hover {
            background: rgba(239, 68, 68, 0.1);
            transform: scale(1.02);
        }
        
        /* Filter cells - row 2 */
        .filter-cell {
            background: rgba(26, 43, 62, 0.3);
            border: 2px solid var(--grid-line);
            padding: 0;
            overflow: hidden;
            transition: all 0.2s ease;
        }
        
        .filter-select {
            width: 100%;
            height: 100%;
            padding: 12px 16px;
            background: transparent;
            color: var(--ice-200);
            border: none;
            font-size: 14px;
            font-family: var(--font-body);
            outline: none;
            cursor: pointer;
        }
        
        .search-input {
            width: 100%;
            height: 100%;
            padding: 12px 16px;
            background: transparent;
            color: var(--ice-200);
            border: none;
            font-size: 14px;
            font-family: var(--font-body);
            outline: none;
        }
        
        .filter-cell:hover {
            border-color: var(--mint-400);
            background: rgba(76, 227, 184, 0.05);
        }
        
        .filter-select:focus,
        .search-input:focus {
            background: rgba(26, 43, 62, 0.8);
        }
        
        .filter-btn {
            width: 100%;
            height: 100%;
            background: var(--halo-gold);
            color: var(--ink-900);
            border: none;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .filter-btn:hover {
            background: #f5c830;
        }
        
        /* Title cell */
        .title-cell {
            grid-column: 1/4;
            grid-row: 3/4;
            background: transparent;
            border: 2px solid var(--grid-line);
            padding: 16px;
            justify-content: flex-start;
        }
        
        .title-text {
            font-size: 24px;
            font-weight: 700;
            color: var(--ice-100);
        }
        
        /* Audit run cells - these ARE grid cells, not floating cards */
        .run-cell {
            background: rgba(26, 43, 62, 0.8);
            border: 2px solid var(--grid-line);
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-direction: column;
            align-items: stretch;
            justify-content: space-between;
        }
        
        .run-cell:hover {
            border-color: var(--halo-gold);
            border-width: 3px;
            background: rgba(26, 43, 62, 0.95);
            transform: scale(1.02);
            z-index: 10;
            box-shadow: 0 0 20px rgba(247, 208, 70, 0.3);
        }
        
        .run-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }
        
        .run-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--halo-gold);
            font-family: var(--font-mono);
        }
        
        .run-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            background: rgba(76, 227, 184, 0.2);
            color: var(--mint-400);
            border: 1px solid var(--mint-400);
        }
        
        .run-details {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 16px;
        }
        
        .run-detail {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
        }
        
        .run-label {
            color: var(--ice-300);
        }
        
        .run-value {
            color: var(--ice-100);
            font-weight: 500;
            font-family: var(--font-mono);
        }
        
        .run-actions {
            display: flex;
            gap: 8px;
            padding-top: 12px;
            border-top: 1px solid var(--grid-line);
        }
        
        .run-btn {
            flex: 1;
            padding: 8px 12px;
            border-radius: 4px;
            text-decoration: none;
            font-size: 12px;
            font-weight: 600;
            text-align: center;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
        }
        
        .run-btn-primary {
            background: var(--halo-gold);
            color: var(--ink-900);
        }
        
        .run-btn-primary:hover {
            background: #f5c830;
        }
        
        .run-btn-secondary {
            background: transparent;
            color: var(--ice-200);
            border: 1px solid var(--grid-line);
        }
        
        .run-btn-secondary:hover {
            border-color: var(--mint-400);
            color: var(--mint-400);
        }
        
        /* Empty state cell */
        .empty-cell {
            grid-column: 5/9;
            grid-row: 6/9;
            background: rgba(26, 43, 62, 0.3);
            border: 2px solid var(--grid-line);
            padding: 60px 40px;
            text-align: center;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .empty-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }
        
        .empty-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--ice-100);
            margin-bottom: 8px;
        }
        
        .empty-text {
            color: var(--ice-300);
            margin-bottom: 24px;
        }
        
        .empty-btn {
            padding: 12px 32px;
            background: var(--mint-400);
            color: var(--ink-900);
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            transition: all 0.2s;
            cursor: pointer;
            margin-top: 8px;
        }
        
        .empty-btn:hover {
            background: #3fd4aa;
            transform: translateY(-2px);
        }
        
        /* Add new project cell */
        .add-project-cell {
            background: rgba(26, 43, 62, 0.5);
            border: 2px dashed var(--grid-line);
            cursor: pointer;
            transition: all 0.3s ease;
            flex-direction: column;
            gap: 12px;
            text-decoration: none;
            color: var(--ice-300);
        }
        
        .add-project-cell:hover {
            border-color: var(--mint-400);
            border-style: solid;
            background: rgba(76, 227, 184, 0.1);
            transform: scale(1.02);
            color: var(--mint-400);
        }
        
        .add-icon {
            font-size: 48px;
            opacity: 0.6;
            transition: all 0.3s;
        }
        
        .add-project-cell:hover .add-icon {
            opacity: 1;
            transform: rotate(90deg);
        }
        
        .add-text {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
    </style>
</head>
<body>
    <div class="main-grid">
        <!-- Row 1: Header -->
        <div class="grid-cell logo-cell">
            <img src="/static/uatu-logo.svg" alt="Uatu" class="logo-img">
        </div>
        
        <div class="grid-cell bg-cell" style="grid-column: 3/4; grid-row: 1/2;"></div>
        <div class="grid-cell bg-cell" style="grid-column: 4/5; grid-row: 1/2;"></div>
        
        <a href="/dashboard" class="grid-cell nav-cell active" style="grid-column: 5/6; grid-row: 1/2;">
            Runs
        </a>
        <a href="/portfolio" class="grid-cell nav-cell" style="grid-column: 6/7; grid-row: 1/2;">
            Portfolio
        </a>
        <a href="/" class="grid-cell nav-cell" style="grid-column: 7/8; grid-row: 1/2;">
            Home
        </a>
        
        <div class="grid-cell bg-cell" style="grid-column: 8/9; grid-row: 1/2;"></div>
        <div class="grid-cell bg-cell" style="grid-column: 9/10; grid-row: 1/2;"></div>
        
        <div class="grid-cell wallet-cell">
            <div class="wallet-info-group">
                {% if user and user.name %}
                <div class="user-name">{{ user.name }}</div>
                {% endif %}
                <div class="wallet-address-row">
                    <div class="wallet-icon"></div>
                    <span class="wallet-address" id="walletAddress">0x66c9...648c</span>
                </div>
                <span class="network-badge">BASE NETWORK</span>
            </div>
            <a href="/logout" class="disconnect-btn">Logout</a>
        </div>
        
        <!-- Row 2: Filters -->
        <div class="grid-cell filter-cell" style="grid-column: 1/3; grid-row: 2/3;">
            <select name="grade" class="filter-select" form="filterForm">
                <option value="">All Grades</option>
                {% for grade in grades %}
                <option value="{{ grade }}" {% if grade == grade_filter %}selected{% endif %}>{{ grade }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="grid-cell filter-cell" style="grid-column: 3/5; grid-row: 2/3;">
            <select name="kind" class="filter-select" form="filterForm">
                <option value="">All Types</option>
                {% for kind in kinds %}
                <option value="{{ kind }}" {% if kind == kind_filter %}selected{% endif %}>{{ kind }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="grid-cell filter-cell" style="grid-column: 5/11; grid-row: 2/3;">
            <form id="filterForm" method="GET" style="width: 100%; height: 100%; display: flex; align-items: center;">
                <input type="text" 
                       name="search" 
                       placeholder="Search contracts..." 
                       value="{{ search_query }}" 
                       class="search-input">
            </form>
        </div>
        
        <div class="grid-cell filter-cell" style="grid-column: 11/13; grid-row: 2/3;">
            <button type="submit" form="filterForm" class="filter-btn">Filter</button>
        </div>
        
        <!-- Row 3: Title -->
        <div class="grid-cell title-cell">
            <h1 class="title-text">Audit Runs</h1>
        </div>
        <div class="grid-cell bg-cell" style="grid-column: 4/5; grid-row: 3/4;"></div>
        <div class="grid-cell bg-cell" style="grid-column: 5/6; grid-row: 3/4;"></div>
        <div class="grid-cell bg-cell" style="grid-column: 6/7; grid-row: 3/4;"></div>
        <div class="grid-cell bg-cell" style="grid-column: 7/8; grid-row: 3/4;"></div>
        <div class="grid-cell bg-cell" style="grid-column: 8/9; grid-row: 3/4;"></div>
        <div class="grid-cell bg-cell" style="grid-column: 9/10; grid-row: 3/4;"></div>
        <div class="grid-cell bg-cell" style="grid-column: 10/11; grid-row: 3/4;"></div>
        <div class="grid-cell bg-cell" style="grid-column: 11/12; grid-row: 3/4;"></div>
        <div class="grid-cell bg-cell" style="grid-column: 12/13; grid-row: 3/4;"></div>
        
        <!-- Rows 4-12: Content Grid -->
        {% if runs %}
            {% for run in runs %}
                {% if loop.index0 == 0 %}
                <div class="grid-cell run-cell" style="grid-column: 1/5; grid-row: 4/7;" onclick="window.location.href='/run/{{ run.ts }}'">
                {% elif loop.index0 == 1 %}
                <div class="grid-cell run-cell" style="grid-column: 5/9; grid-row: 4/7;" onclick="window.location.href='/run/{{ run.ts }}'">
                {% elif loop.index0 == 2 %}
                <div class="grid-cell run-cell" style="grid-column: 9/13; grid-row: 4/7;" onclick="window.location.href='/run/{{ run.ts }}'">
                {% elif loop.index0 == 3 %}
                <div class="grid-cell run-cell" style="grid-column: 1/5; grid-row: 7/10;" onclick="window.location.href='/run/{{ run.ts }}'">
                {% elif loop.index0 == 4 %}
                <div class="grid-cell run-cell" style="grid-column: 5/9; grid-row: 7/10;" onclick="window.location.href='/run/{{ run.ts }}'">
                {% elif loop.index0 == 5 %}
                <div class="grid-cell run-cell" style="grid-column: 9/13; grid-row: 7/10;" onclick="window.location.href='/run/{{ run.ts }}'">
                {% elif loop.index0 == 6 %}
                <div class="grid-cell run-cell" style="grid-column: 1/5; grid-row: 10/13;" onclick="window.location.href='/run/{{ run.ts }}'">
                {% elif loop.index0 == 7 %}
                <div class="grid-cell run-cell" style="grid-column: 5/9; grid-row: 10/13;" onclick="window.location.href='/run/{{ run.ts }}'">
                {% elif loop.index0 == 8 %}
                <div class="grid-cell run-cell" style="grid-column: 9/13; grid-row: 10/13;" onclick="window.location.href='/run/{{ run.ts }}'">
                {% else %}
                <div class="grid-cell run-cell" style="display: none;">
                {% endif %}
                    <div class="run-header">
                        <div class="run-title">{{ run.id if run.id else 'Sample' }}</div>
                        <span class="run-badge" style="{% if run.status == 'running' %}background: rgba(247, 208, 70, 0.2); color: var(--halo-gold); border-color: var(--halo-gold);{% elif run.status == 'failed' %}background: rgba(239, 68, 68, 0.2); color: #EF4444; border-color: #EF4444;{% elif run.grade == 'Pending' %}background: rgba(156, 180, 198, 0.2); color: var(--ice-300); border-color: var(--ice-300);{% endif %}">
                            {% if run.status == 'running' %}
                                🔄 {{ run.phase|title if run.phase else 'Running' }}
                            {% elif run.status == 'failed' %}
                                ❌ Failed
                            {% else %}
                                {{ run.grade if run.grade else 'INFO' }}
                            {% endif %}
                        </span>
                    </div>
                    
                    <div class="run-details">
                        <div class="run-detail">
                            <span class="run-label">Type:</span>
                            <span class="run-value">{{ run.kind if run.kind else 'unknown' }}</span>
                        </div>
                        {% if run.status == 'completed' %}
                        <div class="run-detail">
                            <span class="run-label">Score:</span>
                            <span class="run-value">{{ "%.1f"|format(run.overall) if run.overall else '0.0' }}</span>
                        </div>
                        {% if run.has_tests %}
                        <div class="run-detail">
                            <span class="run-label">Tests:</span>
                            <span class="run-value">{{ run.test_count }} generated</span>
                        </div>
                        {% endif %}
                        {% else %}
                        <div class="run-detail">
                            <span class="run-label">Status:</span>
                            <span class="run-value">{{ run.phase if run.phase else run.status }}</span>
                        </div>
                        {% if run.user %}
                        <div class="run-detail">
                            <span class="run-label">User:</span>
                            <span class="run-value">{{ run.user }}</span>
                        </div>
                        {% endif %}
                        {% endif %}
                        <div class="run-detail">
                            <span class="run-label">Timestamp:</span>
                            <span class="run-value">{{ run.ts if run.ts else '20250831_093846' }}</span>
                        </div>
                    </div>
                    
                    <div class="run-actions">
                        {% if run.status == 'completed' %}
                        <a href="/run/{{ run.ts }}" class="run-btn run-btn-primary">
                            View Details
                        </a>
                        {% if run.has_tests %}
                        <a href="#" class="run-btn run-btn-secondary" onclick="alert('Test viewing feature coming soon!')">
                            🧪 Tests ({{ run.test_count }})
                        </a>
                        {% endif %}
                        {% if run.has_pdf %}
                        <a href="/download/pdf/{{ run.ts }}" class="run-btn run-btn-secondary">
                            📄 Download PDF
                        </a>
                        {% endif %}
                        {% elif run.status == 'running' %}
                        <a href="#" class="run-btn run-btn-secondary" onclick="refreshStatus('{{ run.id }}')">
                            🔄 Refresh Status
                        </a>
                        {% elif run.status == 'failed' %}
                        <a href="#" class="run-btn run-btn-secondary" onclick="showError('{{ run.error|e }}')">
                            ❌ View Error
                        </a>
                        {% else %}
                        <a href="/run/{{ run.ts }}" class="run-btn run-btn-primary">
                            View Details
                        </a>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
            
            <!-- Add new project cell - always show after last run -->
            {% if runs|length == 0 %}
                <a href="/" class="grid-cell add-project-cell" style="grid-column: 1/5; grid-row: 4/7;">
                    <div class="add-icon">+</div>
                    <div class="add-text">Add New Project</div>
                </a>
                <div class="grid-cell bg-cell" style="grid-column: 5/9; grid-row: 4/7;"></div>
                <div class="grid-cell bg-cell" style="grid-column: 9/13; grid-row: 4/7;"></div>
            {% elif runs|length == 1 %}
                <a href="/" class="grid-cell add-project-cell" style="grid-column: 5/9; grid-row: 4/7;">
                    <div class="add-icon">+</div>
                    <div class="add-text">Add New Project</div>
                </a>
                <div class="grid-cell bg-cell" style="grid-column: 9/13; grid-row: 4/7;"></div>
            {% elif runs|length == 2 %}
                <a href="/" class="grid-cell add-project-cell" style="grid-column: 9/13; grid-row: 4/7;">
                    <div class="add-icon">+</div>
                    <div class="add-text">Add New Project</div>
                </a>
            {% endif %}
            
            <!-- Fill remaining cells with background -->
            {% if runs|length == 3 %}
                <a href="/" class="grid-cell add-project-cell" style="grid-column: 1/5; grid-row: 7/10;">
                    <div class="add-icon">+</div>
                    <div class="add-text">Add New Project</div>
                </a>
                <div class="grid-cell bg-cell" style="grid-column: 5/9; grid-row: 7/10;"></div>
                <div class="grid-cell bg-cell" style="grid-column: 9/13; grid-row: 7/10;"></div>
            {% elif runs|length == 4 %}
                <a href="/" class="grid-cell add-project-cell" style="grid-column: 5/9; grid-row: 7/10;">
                    <div class="add-icon">+</div>
                    <div class="add-text">Add New Project</div>
                </a>
                <div class="grid-cell bg-cell" style="grid-column: 9/13; grid-row: 7/10;"></div>
            {% elif runs|length == 5 %}
                <a href="/" class="grid-cell add-project-cell" style="grid-column: 9/13; grid-row: 7/10;">
                    <div class="add-icon">+</div>
                    <div class="add-text">Add New Project</div>
                </a>
            {% elif runs|length == 6 %}
                <a href="/" class="grid-cell add-project-cell" style="grid-column: 1/5; grid-row: 10/13;">
                    <div class="add-icon">+</div>
                    <div class="add-text">Add New Project</div>
                </a>
                <div class="grid-cell bg-cell" style="grid-column: 5/9; grid-row: 10/13;"></div>
                <div class="grid-cell bg-cell" style="grid-column: 9/13; grid-row: 10/13;"></div>
            {% elif runs|length == 7 %}
                <a href="/" class="grid-cell add-project-cell" style="grid-column: 5/9; grid-row: 10/13;">
                    <div class="add-icon">+</div>
                    <div class="add-text">Add New Project</div>
                </a>
                <div class="grid-cell bg-cell" style="grid-column: 9/13; grid-row: 10/13;"></div>
            {% elif runs|length == 8 %}
                <a href="/" class="grid-cell add-project-cell" style="grid-column: 9/13; grid-row: 10/13;">
                    <div class="add-icon">+</div>
                    <div class="add-text">Add New Project</div>
                </a>
            {% else %}
                <!-- Fill remaining empty spaces when less than 3 runs total -->
                {% if runs|length < 3 %}
                    <div class="grid-cell bg-cell" style="grid-column: 5/9; grid-row: 7/10;"></div>
                    <div class="grid-cell bg-cell" style="grid-column: 9/13; grid-row: 7/10;"></div>
                    <div class="grid-cell bg-cell" style="grid-column: 1/5; grid-row: 10/13;"></div>
                    <div class="grid-cell bg-cell" style="grid-column: 5/9; grid-row: 10/13;"></div>
                    <div class="grid-cell bg-cell" style="grid-column: 9/13; grid-row: 10/13;"></div>
                {% elif runs|length < 6 %}
                    <div class="grid-cell bg-cell" style="grid-column: 1/5; grid-row: 10/13;"></div>
                    <div class="grid-cell bg-cell" style="grid-column: 5/9; grid-row: 10/13;"></div>
                    <div class="grid-cell bg-cell" style="grid-column: 9/13; grid-row: 10/13;"></div>
                {% endif %}
            {% endif %}
            
        {% else %}
            <!-- Empty state - cleaner grid layout -->
            <!-- Row 4-5: Top empty cells -->
            <div class="grid-cell bg-cell" style="grid-column: 1/5; grid-row: 4/6;"></div>
            <div class="grid-cell bg-cell" style="grid-column: 5/9; grid-row: 4/6;"></div>
            <div class="grid-cell bg-cell" style="grid-column: 9/13; grid-row: 4/6;"></div>
            
            <!-- Row 6-8: Middle row with empty state message -->
            <div class="grid-cell bg-cell" style="grid-column: 1/5; grid-row: 6/9;"></div>
            <div class="grid-cell empty-cell">
                <div class="empty-icon">🔍</div>
                <h2 class="empty-title">No audit runs found</h2>
                <p class="empty-text">
                    Start your first smart contract security audit to see results here.
                </p>
                <a href="/" class="empty-btn">🚀 Start Auditing</a>
            </div>
            <div class="grid-cell bg-cell" style="grid-column: 9/13; grid-row: 6/9;"></div>
            
            <!-- Row 9-12: Bottom empty cells -->
            <div class="grid-cell bg-cell" style="grid-column: 1/5; grid-row: 9/11;"></div>
            <div class="grid-cell bg-cell" style="grid-column: 5/9; grid-row: 9/11;"></div>
            <div class="grid-cell bg-cell" style="grid-column: 9/13; grid-row: 9/11;"></div>
            <div class="grid-cell bg-cell" style="grid-column: 1/5; grid-row: 11/13;"></div>
            <div class="grid-cell bg-cell" style="grid-column: 5/9; grid-row: 11/13;"></div>
            <div class="grid-cell bg-cell" style="grid-column: 9/13; grid-row: 11/13;"></div>
        {% endif %}
    </div>
    
    <script>
        // Set wallet address if available
        window.addEventListener('load', () => {
            // Try to get wallet address from session/localStorage
            const walletAddress = localStorage.getItem('walletAddress');
            if (walletAddress) {
                const short = walletAddress.substring(0, 6) + '...' + walletAddress.substring(walletAddress.length - 4);
                document.getElementById('walletAddress').textContent = short;
            }
            
            // Or get from cookie
            function getCookie(name) {
                const value = `; ${document.cookie}`;
                const parts = value.split(`; ${name}=`);
                if (parts.length === 2) return parts.pop().split(';').shift();
                return null;
            }
            
            const cookieWallet = getCookie('wallet_address');
            if (cookieWallet && !walletAddress) {
                const short = cookieWallet.substring(0, 6) + '...' + cookieWallet.substring(cookieWallet.length - 4);
                document.getElementById('walletAddress').textContent = short;
            }
        });
        
        // Functions for audit actions
        function refreshStatus(auditId) {
            fetch(`/api/audit/status?audit_id=${auditId}`)
                .then(response => response.json())
                .then(data => {
                    alert(`Status: ${data.status} - ${data.phase || ''}\nUpdated: ${data.updated_at}`);
                    // Optionally reload the page to show updated status
                    window.location.reload();
                })
                .catch(error => {
                    alert('Error fetching status: ' + error.message);
                });
        }
        
        function showError(errorMsg) {
            alert(`Audit Error:\n\n${errorMsg}`);
        }
    </script>
</body>
</html>