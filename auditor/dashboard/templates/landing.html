{% extends "base.html" %}

{% block title %}UatuAudit â€” Ship with certainty{% endblock %}

{% set show_back_button = false %}

{% block extra_styles %}
<style>
    :root{
      /* Color palette */
      --ink-900:#0B1B2B;
      --slate-800:#102132;
      --grid-line:rgba(84, 130, 158, .4);
      --halo-gold:#F7D046;
      --mint-400:#4CE3B8;
      --ice-100:#F2F7FB;
      --ice-200:#D5E4F0;
      --ice-300:#9CB4C6;
      
      /* Typography */
      --font-display:'Inter', system-ui, sans-serif;
      --font-body:'Inter', system-ui, sans-serif;
      --font-mono:'IBM Plex Mono', monospace;
    }
    
    /* Reset */
    *{box-sizing:border-box; margin:0; padding:0;}
    html,body{height:100%; overflow:hidden;}
    body{
      font-family:var(--font-body); 
      color:var(--ice-200); 
      background:var(--ink-900);
      -webkit-font-smoothing:antialiased;
    }
    
    /* Grid container - 12x8 grid */
    .grid-container{
      position:fixed;
      top:0;
      left:0;
      width:100vw;
      height:100vh;
      display:grid;
      grid-template-columns:repeat(12, 1fr);
      grid-template-rows:repeat(8, 1fr);
      gap:2px;
    }
    
    /* Base grid cell */
    .grid-cell{
      background:rgba(16, 33, 50, 0.2);
      border:1px solid var(--grid-line);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      padding:16px;
      overflow:hidden;
      transition:all 0.2s ease;
      position:relative;
    }
    
    /* Interactive hover effects */
    .grid-cell.interactive:hover{
      border-color:var(--halo-gold);
      border-width:3px;
      color:var(--halo-gold);
      font-weight:600;
      transform:scale(1.01);
      z-index:10;
      box-shadow:0 0 15px rgba(247,208,70,.3);
    }
    
    /* Logo cell - uses common styling from grid-system.css */
    
    /* Connect Wallet button */
    .wallet-cell{
      grid-column:11/13;
      grid-row:1/2;
      background:var(--halo-gold);
      color:var(--ink-900);
      font-size:14px;
      font-weight:700;
      cursor:pointer;
      border:2px solid var(--grid-line);
      border-radius:8px;
      margin:8px;
      transition:all 0.3s ease;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
    }
    
    .wallet-cell:hover{
      background:var(--halo-gold) !important;
      color:var(--ink-900) !important;
      border-color:var(--halo-gold);
      margin:0;
      border-radius:0;
      transform:scale(1.02);
      font-size:16px;
      font-weight:800;
      box-shadow:0 0 20px rgba(247,208,70,.4);
    }
    
    .wallet-cell:hover::before{
      content:"ðŸ”—";
      font-size:18px;
      margin-right:4px;
    }
    
    /* Header spacer */
    .header-spacer{
      grid-column:4/10;
      grid-row:1/2;
      background:rgba(16, 33, 50, 0.08);
      border:1px solid var(--grid-line);
    }
    
    /* Main headline - large merged area */
    .headline-cell{
      grid-column:1/7;
      grid-row:2/6;
      background:rgba(16, 33, 50, 0.3);
      border:2px solid var(--grid-line);
      align-items:flex-start;
      text-align:left;
      padding:40px;
    }
    
    .headline-cell h1{
      font-size:52px;
      font-weight:700;
      line-height:1.1;
      color:var(--ice-100);
      margin-bottom:20px;
    }
    
    .headline-cell .lead{
      font-size:20px;
      color:var(--ice-300);
      max-width:500px;
      line-height:1.4;
    }
    
    /* Stats - individual 2-grid cells */
    .stat-200{
      grid-column:7/9;
      grid-row:2/3;
      background:transparent;
      border:2px solid var(--grid-line);
    }
    
    .stat-30s{
      grid-column:9/11;
      grid-row:2/3;
      background:transparent;
      border:2px solid var(--grid-line);
    }
    
    .stat-number{
      font-size:32px;
      font-weight:700;
      color:var(--halo-gold);
      font-family:var(--font-mono);
    }
    
    .stat-label{
      font-size:12px;
      color:var(--ice-300);
      text-align:center;
      margin-top:4px;
    }
    
    /* Branch Audits - merged 4-grid cell */
    .branch-cell{
      grid-column:7/11;
      grid-row:3/4;
      background:transparent;
      border:2px solid var(--grid-line);
    }
    
    .branch-cell:hover{
      border-color:var(--mint-400);
      border-width:3px;
      color:var(--mint-400);
      box-shadow:0 0 15px rgba(76,227,184,.3);
    }
    
    /* Security Guardian - 6 grids (3x2) with 2 offset from top */
    .security-guardian{
      grid-column:11/13;
      grid-row:3/6;
      background:transparent;
      border:2px solid var(--grid-line);
      position:relative;
      padding:12px;
    }
    
    .security-guardian img{
      width:160px;
      height:160px;
      object-fit:contain;
    }
    
    /* CTA Section - better arranged */
    .cta-start{
      grid-column:1/4;
      grid-row:6/8;
      background:rgba(247, 208, 70, 0.15);
      border:2px solid var(--grid-line);
      padding:24px;
      align-items:flex-start;
      text-align:left;
    }
    
    .cta-start h3{
      font-size:24px;
      margin-bottom:16px;
      font-weight:700;
      color:var(--ice-100);
    }
    

    
    /* Process Steps - single merged 4-grid cell */
    .process-merged{
      grid-column:7/11;
      grid-row:6/8;
      background:rgba(247, 208, 70, 0.15);
      border:2px solid var(--grid-line);
      display:grid;
      grid-template-columns:1fr 1fr;
      grid-template-rows:1fr 1fr;
      gap:8px;
      padding:16px;
    }
    
    .process-step{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      background:rgba(247, 208, 70, 0.2);
      border:1px solid var(--halo-gold);
      border-radius:8px;
      padding:12px;
      transition:all 0.2s ease;
    }
    
    .process-step:hover{
      background:var(--halo-gold);
      color:var(--ink-900);
      transform:scale(1.02);
    }
    
    .process-number{
      width:28px;
      height:28px;
      border-radius:50%;
      background:var(--ink-900);
      color:var(--halo-gold);
      font-weight:700;
      font-size:14px;
      display:flex;
      align-items:center;
      justify-content:center;
      margin-bottom:6px;
    }
    
    .process-step:hover .process-number{
      background:var(--halo-gold);
      color:var(--ink-900);
    }
    
    .process-label{
      font-size:11px;
      font-weight:600;
    }
    
    /* Social icons - 4 consecutive grids */
    .social-row{
      grid-column:4/8;
      grid-row:8/9;
      display:grid;
      grid-template-columns:1fr 1fr 1fr 1fr;
      gap:2px;
      border:2px solid var(--grid-line);
    }
    
    .social-cell{
      background:rgba(76, 227, 184, 0.1);
      border:1px solid var(--grid-line);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:24px;
      color:var(--ice-200);
      cursor:pointer;
      transition:all 0.2s ease;
    }
    
    .social-cell:hover{
      background:var(--mint-400);
      color:var(--ink-900);
      transform:scale(1.05);
    }
    
    /* Fill remaining cells */
    .fill-cell{
      background:rgba(16, 33, 50, 0.1);
      border:1px solid var(--grid-line);
    }
    
    .fill-cell.accent{
      background:rgba(76, 227, 184, 0.04);
    }
    
    .fill-cell.gold{
      background:rgba(247, 208, 70, 0.04);
    }
    
    /* Remove hover for non-interactive elements */
    .no-hover{
      transition:none;
    }
    
    .no-hover:hover{
      background:inherit;
      transform:none;
      color:inherit;
      font-size:inherit;
    }
    
  </style>
{% endblock %}

{% block main_content %}
    
    <!-- Main headline area -->
    <div class="grid-cell headline-cell no-hover">
      <h1>Ship with <span style="color:var(--halo-gold);" class="highlight-text">certainty</span>.</h1>
      <p class="lead">One-click audits with deterministic risk scoring and on-chain receipts.</p>
    </div>
    
    <!-- Stats -->
    <div class="grid-cell stat-200 interactive">
      <div class="stat-number">200</div>
      <div class="stat-label">USD per audit</div>
    </div>
    
    <div class="grid-cell stat-30s interactive">
      <div class="stat-number">30s</div>
      <div class="stat-label">to first result</div>
    </div>
    
    <!-- Single cell for spacing -->
    <div class="grid-cell fill-cell gold no-hover" style="grid-column:11/12; grid-row:2/3;"></div>
    <div class="grid-cell fill-cell accent no-hover" style="grid-column:12/13; grid-row:2/3;"></div>
    
    <!-- Branch Audits -->
    <div class="grid-cell branch-cell interactive">
      <div style="font-size:18px; font-weight:700; color:var(--ice-100);">Branch Audits</div>
      <div style="font-size:12px; margin-top:4px; color:var(--ice-300);">Real-time security validation</div>
    </div>
    
    <!-- Security Guardian - 6 grids (3x2) with 2 offset from top -->
    <div class="grid-cell security-guardian no-hover">
      <img src="/static/uatu-mascot.png" alt="Security Guardian">
    </div>
    
    <!-- Fill cells for spacing -->
    <div class="grid-cell fill-cell no-hover" style="grid-column:7/8; grid-row:4/5;"></div>
    <div class="grid-cell fill-cell accent no-hover" style="grid-column:8/9; grid-row:4/5;"></div>
    <div class="grid-cell fill-cell gold no-hover" style="grid-column:9/10; grid-row:4/5;"></div>
    <div class="grid-cell fill-cell no-hover" style="grid-column:10/11; grid-row:4/5;"></div>
    
    <div class="grid-cell fill-cell accent no-hover" style="grid-column:7/8; grid-row:5/6;"></div>
    <div class="grid-cell fill-cell no-hover" style="grid-column:8/9; grid-row:5/6;"></div>
    <div class="grid-cell fill-cell gold no-hover" style="grid-column:9/10; grid-row:5/6;"></div>
    <div class="grid-cell fill-cell accent no-hover" style="grid-column:10/11; grid-row:5/6;"></div>
    
    <!-- CTA Section - better arranged -->
    <div class="grid-cell cta-start no-hover">
      <h3>Start an Audit</h3>
      <div style="font-size:14px; color:var(--ice-300); line-height:1.4;">Ready to secure your code? Begin with a comprehensive security audit.</div>
    </div>
    

    
    <!-- Process Steps - single merged grid -->
    <div class="process-merged">
      <div class="process-step interactive">
        <div class="process-number">1</div>
        <div class="process-label">Connect GitHub</div>
      </div>
      <div class="process-step interactive">
        <div class="process-number">2</div>
        <div class="process-label">Analyze Code</div>
      </div>
      <div class="process-step interactive">
        <div class="process-number">3</div>
        <div class="process-label">Review Report</div>
      </div>
      <div class="process-step interactive">
        <div class="process-number">4</div>
        <div class="process-label">Deliver PDF</div>
      </div>
    </div>
    
    <!-- Remaining cells -->
    <div class="grid-cell fill-cell gold no-hover" style="grid-column:11/12; grid-row:6/7;"></div>
    <div class="grid-cell fill-cell accent no-hover" style="grid-column:12/13; grid-row:6/7;"></div>
    <div class="grid-cell fill-cell no-hover" style="grid-column:11/12; grid-row:7/8;"></div>
    <div class="grid-cell fill-cell gold no-hover" style="grid-column:12/13; grid-row:7/8;"></div>
    
    <!-- Row 8 fill -->
    <div class="grid-cell fill-cell accent no-hover" style="grid-column:1/2; grid-row:8/9;"></div>
    <div class="grid-cell fill-cell no-hover" style="grid-column:2/3; grid-row:8/9;"></div>
    <div class="grid-cell fill-cell gold no-hover" style="grid-column:3/4; grid-row:8/9;"></div>
    
    <!-- Social icons - 4 consecutive grids -->
    <div class="social-row">
      <div class="social-cell interactive" title="Twitter/X">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
        </svg>
      </div>
      <div class="social-cell interactive" title="Telegram">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
        </svg>
      </div>
      <div class="social-cell interactive" title="GitHub">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </svg>
      </div>
      <div class="social-cell interactive" title="Crypto/Coin">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 14.438a.562.562 0 01-.562.562H7a.562.562 0 01-.562-.562v-.876A.562.562 0 017 13h10a.562.562 0 01.562.562v.876zm0-3.876A.562.562 0 0117 10H7a.562.562 0 01-.562-.562V8.562A.562.562 0 017 8h10a.562.562 0 01.562.562v.876a.562.562 0 010 1.124z"/>
        </svg>
      </div>
    </div>
    
    <!-- Remaining fill cells -->
    <div class="grid-cell fill-cell accent no-hover" style="grid-column:8/9; grid-row:8/9;"></div>
    <div class="grid-cell fill-cell no-hover" style="grid-column:9/10; grid-row:8/9;"></div>
    <div class="grid-cell fill-cell gold no-hover" style="grid-column:10/11; grid-row:8/9;"></div>
    <div class="grid-cell fill-cell accent no-hover" style="grid-column:11/12; grid-row:8/9;"></div>
    <div class="grid-cell fill-cell no-hover" style="grid-column:12/13; grid-row:8/9;"></div>
  </div>
{% endblock %}

{% block scripts %}
<script>
    // Simple wallet connection check
    let walletConnected = false;
    let userAddress = null;
    
    // Check for existing session on page load
    function checkExistingSession() {
      const storedSession = localStorage.getItem('uatu_session');
      if (storedSession) {
        try {
          const sessionData = JSON.parse(storedSession);
          const expiresAt = new Date(sessionData.expires_at);
          
          if (expiresAt > new Date()) {
            walletConnected = true;
            userAddress = sessionData.wallet_address;
            
            // Update connect wallet button
            const connectBtn = document.getElementById('connectWallet');
            if (connectBtn) {
              connectBtn.textContent = userAddress.slice(0, 6) + '...' + userAddress.slice(-4);
              connectBtn.onclick = () => window.location.href = '/dashboard';
            }
            return true;
          } else {
            localStorage.removeItem('uatu_session');
          }
        } catch (error) {
          localStorage.removeItem('uatu_session');
        }
      }
      return false;
    }
    
         // Initialize on page load
         document.addEventListener('DOMContentLoaded', function() {
           if (checkExistingSession()) {
             // If wallet is already connected, redirect to dashboard
             window.location.href = '/dashboard';
           }
         });
    
    // Social icon clicks
    document.querySelectorAll('.social-cell').forEach(cell => {
      cell.addEventListener('click', () => {
        alert('Social feature coming soon!');
      });
    });
  </script>
{% endblock %}